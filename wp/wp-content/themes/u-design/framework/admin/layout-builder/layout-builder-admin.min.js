"use strict";window.themeAdmin=window.themeAdmin||{},function(t){var a={init:function(){for(var t in this.conditions=JSON.parse(JSON.stringify(alpha_layout_vars.conditions))||{},this.schemes=alpha_layout_vars.schemes||{},this.clipboard=!1,this.controls=[],alpha_layout_vars.controls)if(!t.startsWith("content"))for(var a in alpha_layout_vars.controls[t])this.controls.push(a)},getConditions:function(t="",a=-1){return t?(this.conditions[t]||(this.conditions[t]=[]),a>=0&&this.conditions[t][a]?this.conditions[t][a]:this.conditions[t]):this.conditions},getOptionValues:function(t,a){return!(!this.conditions[t]||!this.conditions[t][a])&&this.conditions[t][a].options},getConditionTitle:function(t,a){return t&&this.schemes[t]?a?this.schemes[t].layout_title:this.schemes[t].title:""},setConditionTitle:function(t,a,e){this.conditions[t][a]&&(this.conditions[t][a].title=e),this.requireSave()},getScheme:function(t,a=""){return a?this.schemes[t].scheme[a]:this.schemes[t].scheme},getOptionControls:function(t){return!!alpha_layout_vars.controls[t]&&alpha_layout_vars.controls[t]},getTemplates:function(t){return alpha_layout_vars.templates[t]},canExtendCondition:function(t,a=""){return!!(t&&this.schemes[t]&&this.schemes[t].scheme)&&(!a||this.schemes[t].scheme[a]&&(this.schemes[t].scheme[a].list||this.schemes[t].scheme[a].ajaxselect))},updateCategoryUI:function(a=""){var e=function(a){var e=t(".alpha-condition-cat-"+a+"> .alpha-condition-count"),o=this.conditions[a].filter((function(t){return t})).length;e.text("("+o+")"),o?e.slideDown():e.slideUp()}.bind(this);a&&e(a);var o=0;for(var i in this.conditions)o+=this.conditions[i].filter((function(t){return t})).length,a||e(i);t(".alpha-condition-cat-site > .alpha-condition-count").text("("+o+")").slideDown()},addCondition:function(t){this.conditions[t]||(this.conditions[t]=[]);var a={};return a.title=this.getConditionTitle(t,!0)+" "+(this.conditions[t].length+1),a.scheme={},this.schemes[t].scheme&&this.schemes[t].scheme.all&&(a.scheme.all=!0),this.conditions[t].push(a),this.updateCategoryUI(t),this.requireSave(),this.conditions[t].length-1},deleteCondition:function(a,e){void 0!==this.conditions[a][e]&&(this.conditions[a].splice(e,1),t(".alpha-layout-item[data-category="+a+"]").each((function(){var a=this.getAttribute("data-condition-no");a>e&&(this.setAttribute("data-condition-no",a-1),t(this).data("condition-no",a-1))})),t("#alpha_layout_content").isotope("updateSortData").isotope()),this.updateCategoryUI(a),this.requireSave()},duplicateCondition:function(a,e){if(a&&"number"==typeof e&&this.conditions[a][e]){var o=JSON.parse(JSON.stringify(this.conditions[a][e]));return t(".alpha-layout-item[data-category="+a+"]").each((function(){var a=this.getAttribute("data-condition-no");a>e&&(this.setAttribute("data-condition-no",1*a+1),t(this).data("condition-no",1*a+1))})),this.conditions[a].splice(e,0,o),this.updateCategoryUI(a),this.requireSave(),e+1}},copyOptions:function(t,a){this.clipboard={category:t,options:this.getOptionValues(t,a)}},pasteOptions:function(t,a,o){if(this.clipboard){if(t==this.clipboard.category)this.conditions[t][a]?this.conditions[t][a].options=this.clipboard.options:this.conditions[t][a]={options:this.clipboard.options};else{if(this.conditions[t][a].options)for(var i in this.conditions[t][a].options)this.controls.indexOf(i)&&delete this.conditions[t][a].options[i];else this.conditions[t][a].options={};for(var i in this.clipboard.options)this.controls.indexOf(i)&&(this.conditions[t][a].options[i]=this.clipboard.options[i])}e.refreshLayoutStatus(o),this.requireSave()}},requireSave:function(){t(".alpha-layouts-save").addClass("require-save"),t(window).trigger("show_btn_header")},setConditionScheme:function(t,a,e,o){if(void 0===this.conditions[t][a])(i={})[e]=o,i.all=!0,this.conditions[t][a]={scheme:i};else if(this.conditions[t][a]){var i;if(!this.conditions[t][a].scheme)(i={})[e]=o,this.conditions[t][a].scheme=i;o?this.conditions[t][a].scheme[e]=o:delete this.conditions[t][a].scheme[e]}this.requireSave()},setConditionList:function(t,a,e,o){this.conditions[t][a]=o?{type:e,list:o}:{type:e},this.requireSave()},setConditionOption:function(t,a,e,o){this.conditions[t][a].options||(this.conditions[t][a].options={}),o?this.conditions[t][a].options[e]=o:delete this.conditions[t][a].options[e],this.requireSave()},save:function(){t(".alpha-layouts-save").removeClass("require-save"),t(window).trigger("show_btn_header"),void 0!==window.top.alpha_core_vars.layout_save&&(window.top.alpha_core_vars.layout_save=!1),t.post(alpha_layout_vars.ajax_url,{action:"alpha_layout_builder_save",nonce:alpha_layout_vars.nonce,conditions:this.conditions},(function(){})).fail((function(){t(".alpha-layouts-save").addClass("require-save"),t(".alpha-modal-message").remove(),t(".alpha-layouts-save").before('<span class="alpha-modal-message"></span>'),t(window).trigger("show_btn_header")}))}},e={init:function(){this.buttonDelete='<button class="alpha-condition-button alpha-condition-delete far fa-trash-alt"></button>',this.buttonDuplicate='<button class="alpha-condition-button alpha-condition-duplicate far fa-clone"></button>',this.buttonSet='<button class="alpha-condition-button alpha-condition-set fa fa-cog"></button>',this.layoutBoxTemplate=t("#alpha_layout_template").text(),t("#alpha_layout_template").remove(),t(document.body).on("click",".alpha-layouts-save",this.onSave).on("contextmenu",".alpha-layout-item",this.onContextMenu.bind(this)).on("click","#alpha_layout_content",this.closeContextMenu).on("click",".alpha-condition-menu > a",this.clickContextMenuItem).on("click",".alpha-condition-copy",this.copyOptions).on("click",".alpha-condition-paste",this.pasteOptions).on("click",".alpha-condition-edit-back",this.goBackFromEdit).on("click",".alpha-condition-cat",this.clickCategory.bind(this)).on("click",".alpha-layout-more",this.addCondition.bind(this)).on("click",".alpha-condition-delete",this.deleteCondition.bind(this)).on("click",".alpha-condition-duplicate",this.duplicateCondition.bind(this)).on("change",".alpha-scheme-options > div > label input[type=checkbox]",this.changeConditionScheme.bind(this)).on("change",".alpha-scheme-list",this.changeConditionItem).on("input",".alpha-condition-title",this.changeConditionTitle.bind(this)).on("click",".alpha-layout .layout-part",this.editPart).on("click",".alpha-condition-set",this.editCondition).on("click",this.clickOther.bind(this)).on("change",".alpha-block-select input",this.changeBlockMode.bind(this)).on("change",".alpha-layout-options input",this.changeOptionInput.bind(this)).on("change",".alpha-layout-options select",this.changeOptionInput.bind(this)),this.setupLayouts()},refreshUI:function(a){a&&"layout"!=a&&"add"!=a||t("#alpha_layout_content").isotope(),a&&"add"!=a||this.refreshLayoutStatus()},refreshLayoutStatus:function(e){e||(e=t("#alpha_layout_content")),e.is(".alpha-layout-item")||(e=e.find(".alpha-layout-item")),e.each((function(){var o=t(this),i=o.data("category"),n=o.data("conditionNo"),l=a.getOptionValues(i,n);if(l)for(var s in alpha_layout_vars.controls)if(a.controls.indexOf(s)){var c=a.getOptionControls(s),d=o.find('.layout-part[data-part="'+s+'"]'),r=!1;for(var h in d.removeClass("set hide"),d.children(".block-value").text(""),c)if((!e.closest(".alpha-layouts-container.display-conditions").length||"general"!=s||"popup"==h)&&l[h]){r=!0;break}if(e.closest(".alpha-layouts-container.display-conditions").length&&("content_single_product"==s?s="single_product_block":"content_archive_product"==s?s="shop_block":"content_cart"==s?s="cart_block":"content_checkout"==s?s="checkout_block":-1!=s.indexOf("content_single_")?s="single_block":-1!=s.indexOf("content_archive_")?s="archive_block":"general"==s&&(s="popup")),c[s]&&"hide"==l[s])d.addClass("hide");else if(r&&(d.addClass("set"),c[s])){var p=a.getTemplates(c[s].type.replace("block_",""));p&&p[l[s]]&&d.children(".block-value").text(p[l[s]])}}}))},setupLayouts:function(){var e="",o=a.schemes;if(o){for(var i in o){var n=a.getConditions(i);for(var l in n)e+=this.getNewConditionUI(i,l);"site"==i||!a.canExtendCondition(i)&&n.length||(e+=this.getAddMoreUI(i))}t("#alpha_layout_content").html(e).isotope({layoutMode:"fitRows",filter:".alpha-layout-item",sortBy:["category","no"],getSortData:{category:function(t){var e=t.getAttribute("data-category");return Object.keys(a.schemes).indexOf(e)},no:function(t){return parseInt(t.getAttribute("data-condition-no"))}}}),a.updateCategoryUI(),this.refreshUI()}},refreshCondition:function(a,e){var o=".alpha-layout-item",i=this;a&&(o+='[data-category="'+a+'"]'),e&&(o+='[data-condition-no="'+e+'"]'),t(o).each((function(){i.editPart({currentTarget:t(this).find(".layout-part.active").get(0)})}))},onSave:function(){a.save()},onContextMenu:function(e){this.closeContextMenu();var o=t(e.currentTarget),i=t(".alpha-admin-panel-content"),n=i.get(0).getBoundingClientRect(),l=o.data("category"),s='<div class="alpha-condition-menu" style="left:'+(e.clientX-n.x+i.scrollLeft())+"px;top:"+(e.clientY-n.y+i.scrollTop())+'px;">',c='<a href="#" class="alpha-condition-';s+=c+'set"><i class="fa fa-cog"></i>'+alpha_layout_vars.text_options+"</a>",s+=c+'copy"><i class="far fa-copy"></i>'+alpha_layout_vars.text_copy+"</a>",a.clipboard&&(s+=c+'paste"><i class="fa fa-paste"></i>'+alpha_layout_vars.text_paste+"</a>"),a.canExtendCondition(l)&&(s+=c+'duplicate"><i class="far fa-clone"></i>'+alpha_layout_vars.text_duplicate+"</a>"),s+=c+'delete"><i class="far fa-trash-alt"></i>'+alpha_layout_vars.text_delete+"</a>",s+="</div>",i.append(s),t(".alpha-condition-menu").data("item",o),e.preventDefault()},closeContextMenu:function(){t(".alpha-condition-menu").remove()},clickContextMenuItem:function(t){t.preventDefault()},copyOptions:function(e){var o=t(e.currentTarget).parent().data("item");a.copyOptions(o.data("category"),o.data("condition-no"))},pasteOptions:function(e){var o=t(e.currentTarget).parent().data("item");a.pasteOptions(o.data("category"),o.data("condition-no"),o)},clickCategory:function(a){var e=t(a.currentTarget).addClass("active"),o=e.data("category");e.siblings(".active").removeClass("active"),t("#alpha_layout_content").isotope({filter:"site"==o?".alpha-layout-item":'[data-category="'+o+'"]'})},getAddMoreUI:function(t){return'<div class="alpha-layout-more-wrap" data-category="'+t+'" data-condition-no="999"><div class="alpha-layout-more"><div class="alpha-layout-more-inner"><i class="alpha-icon-plus"></i>'+alpha_layout_vars.text_create_layout+"<b>"+a.getConditionTitle(t)+"</b></div></div></div>"},getNewConditionUI:function(t,e=-1){-1==e&&(e=a.addCondition(t));var o=a.getConditions(t,e);if(o){var i="";if(a.canExtendCondition(t)){var n,l=a.getScheme(t),s=o.scheme||{};for(var c in i+='<div class="alpha-scheme-options"><label class="apply-text">'+alpha_layout_vars.text_apply_prefix+a.getConditionTitle(t,!0).toLowerCase()+alpha_layout_vars.text_apply_suffix+"</label>",l){n="alpha-scheme-"+c,s&&s.all&&"all"==c||s[c]||(n+=" disabled"),i+='<div class="'+n+'" data-scheme="'+c+'">',i+='<label><input type="checkbox"'+(s[c]?" checked":"")+">"+l[c].title+"</label>";var d=l[c].list;if(d){for(var r in i+='<select multiple class="alpha-scheme-list" data-placeholder="'+l[c].placeholder+'">',d)i+='<option value="'+r+'"'+(s[c]&&s[c].length&&(s[c].indexOf(r)>=0||s[c].indexOf(1*r)>=0)?" selected":"")+">"+d[r]+"</option>";i+="</select>"}else if(l[c].ajaxselect){var h="child"==c?"page":c;i+='<select multiple class="alpha-scheme-list ajaxselect2" data-placeholder="'+l[c].placeholder+'" data-load-option="'+h+'"'+(s[c]?' data-values="'+(Array.isArray(s[c])?s[c].join(","):s[c])+'"':"")+">",i+="</select>"}i+="</div>"}i+="</div>"}var p=!a.getOptionControls("content_"+t);return this.layoutBoxTemplateReplaced=this.layoutBoxTemplate.replace('class="layout-part content" data-part="content"','class="layout-part content'+(p?" disabled":"")+'" data-part="content_'+t+'"'),"single_front"==t&&(this.layoutBoxTemplateReplaced=this.layoutBoxTemplate.replace('class="layout-part ptb"','class="layout-part ptb disabled"')),"archive_product"!=t&&(this.layoutBoxTemplateReplaced=this.layoutBoxTemplateReplaced.replace('class="layout-part top-sidebar sidebar"','class="layout-part top-sidebar sidebar disabled"')),'<div class="alpha-layout-item alpha-layout-item-'+t+'" data-category="'+t+'" data-condition-no="'+e+'"><div class="alpha-condition"><span class="alpha-condition-edit-back fa fa-arrow-left"></span><span class="alpha-condition-title" contenteditable="true">'+(o.title?o.title:a.getConditionTitle(t,!0))+"</span>"+(a.canExtendCondition(t)?this.buttonSet+this.buttonDuplicate:"")+("site"==t?"":this.buttonDelete)+'</div><div class="alpha-condition-layout">'+this.layoutBoxTemplateReplaced+'<div class="alpha-layout-options"><div></div></div>'+i+"</div></div>"}},addCondition:function(){var e=t(".alpha-condition-cat.active").data("category")||"site",o=t(this.getNewConditionUI(e));a.canExtendCondition(e)||t('.alpha-layout-more-wrap[data-category="'+e+'"]').remove(),t("#alpha_layout_content").append(o).isotope("appended",o),this.refreshUI("add")},duplicateCondition:function(e){var o,i=t(e.currentTarget),n=(o=i.is(".alpha-condition-menu > a")?i.parent().data("item"):i.closest(".alpha-layout-item")).data("category"),l=a.duplicateCondition(n,o.data("condition-no")),s=t(this.getNewConditionUI(n,l));t("#alpha_layout_content").append(s).isotope("appended",s).isotope("updateSortData"),this.refreshUI("add")},deleteCondition:function(e){if(confirm(alpha_layout_vars.text_confirm_delete_condition)){var o,i=t(e.currentTarget),n=(o=i.is(".alpha-condition-menu > a")?i.parent().data("item"):i.closest(".alpha-layout-item")).data("category");if("site"!=n){if(a.deleteCondition(n,o.data("condition-no")),o.remove(),!a.canExtendCondition(n)){var l=t(this.getAddMoreUI(n));t("#alpha_layout_content").append(l).isotope("appended",l)}this.refreshUI("layout")}}},changeConditionScheme:function(e){var o=t(e.currentTarget),i=o.closest(".alpha-scheme-options>div"),n=i.data("scheme"),l=i.closest(".alpha-layout-item"),s=l.data("category"),c=l.data("condition-no"),d=o.is(":checked");i.toggleClass("disabled",!d),a.setConditionScheme(s,c,n,d)},changeConditionItem:function(e){var o=t(e.currentTarget),i=o.closest(".alpha-scheme-options>div"),n=i.closest(".alpha-layout-item"),l=n.data("category"),s=n.data("condition-no"),c=i.data("scheme"),d=o.val();a.canExtendCondition(l,c)&&"object"==typeof d&&a.setConditionScheme(l,s,c,!!d.length&&d)},changeConditionTitle:function(e){var o=t(e.currentTarget),i=o.closest(".alpha-layout-item"),n=i.data("category"),l=i.data("condition-no");a.setConditionTitle(n,l,o.text())},editPart:function(e){var o=t(e.currentTarget);if(!o.hasClass("disabled")){var i=o.data("part"),n=o.closest(".alpha-layout").next(".alpha-layout-options").children(),l="",s=o.closest(".alpha-layout-item"),c=s.data("category"),d=s.data("condition-no"),r=a.getOptionControls(i),h=a.getOptionValues(c,d);if(r){var p=[];for(var u in r){var y;do{y=Math.floor(65535*Math.random())}while(p.indexOf(y)>=0);p.push(y);var f="_alpha_"+i+"_"+u+y,v=r[u],_="",m=h&&void 0!==h[u]?h[u]:"";if(v.description?_+='<div class="alpha-layout-desc"><label>'+v.label+"</label><p>"+v.description+"</p></div>":_+='<label for="'+f+'" class="alpha-layout-desc">'+v.label+"</label>","buttonset"==v.type){var g="";for(var g in _+='<input type="radio" id="'+f+"_"+g+'" name="'+f+'" value=""'+(""==m?" checked":"")+' class="radio-default">',_+='<label for="'+f+"_"+g+'" class="label-default fas fa-redo"'+(m?"":' checked="true"')+"></label>",_+='<div class="alpha-radio-button-set">',v.options)_+='<input type="radio" id="'+f+"_"+g+'" name="'+f+'" value="'+g+'"'+(g==m?" checked":"")+">",_+='<label for="'+f+"_"+g+'" class="alpha_'+i+"_"+u+"_"+g+'">'+v.options[g]+"</label>";_+="</div>"}else if("image"==v.type){g="";for(var g in _+='<input type="radio" id="'+f+"_"+g+'" name="'+f+'" value=""'+(""==m?" checked":"")+' class="radio-default">',_+='<label for="'+f+"_"+g+'" class="label-default fas fa-redo"'+(m?"":' checked="true"')+"></label>",_+='<div class="alpha-radio-image-set">',v.options)_+='<input type="radio" id="'+f+"_"+g+'" name="'+f+'" value="'+g+'"'+(g==m?" checked":"")+">",_+='<label for="'+f+"_"+g+'" class="alpha_'+i+"_"+u+"_"+g+'">',_+='<img src="'+alpha_layout_vars.layout_images_url+v.options[g].image+'" title="'+v.options[g].title+'">',_+="</label>";_+="</div>"}else if(v.type.startsWith("block")){var b=v.type.replace("block_","")?v.type.replace("block_",""):"block",C=a.getTemplates(b);for(var x in _+='<div class="alpha-block-select'+(m&&"hide"!=m?"":" inactive-my")+'">',_+='<div class="alpha-radio-button-set">',_+='<input type="radio" name="'+f+'" id="'+f+'_" value=""'+(m?"":" checked")+">",_+='<label class="fa fa-redo" for="'+f+'_" title="'+alpha_layout_vars.text_default+'"></label>',_+='<input type="radio" name="'+f+'" id="'+f+'_hide" value="hide"'+("hide"==m?" checked":"")+">",_+='<label class="fa fa-eye-slash"for="'+f+'_hide"  title="'+alpha_layout_vars.text_hide+'"></label>',_+='<input type="radio" name="'+f+'" id="'+f+'_my" value="my"'+(m&&"hide"!=m?" checked":"")+">",_+='<label class="far fa-hdd" for="'+f+'_my" title="'+alpha_layout_vars.text_my_templates+'"></label>',_+="</div>",_+='<select class="alpha-layout-part-select alpha-layout-part-control" id="'+f+'" name="'+f+'">',C)_+='<option value="'+x+'"'+(m==x?" selected":"")+">"+C[x]+"</option>";_+="</select>",alpha_layout_vars.template_builder[b]?_+="sidebar"==b?'<a href="'+window.location.href.substr(0,window.location.href.indexOf("wp-admin")+8)+'/admin.php?page=alpha-sidebar" target="_blank" class="new-block-template">'+wp.i18n.__("Please create a new ","alpha")+b+"</a>":'<a href="'+window.location.href.substr(0,window.location.href.indexOf("wp-admin")+8)+"/edit.php?post_type="+alpha_admin_vars.theme+"_template&"+alpha_admin_vars.theme+"_template_type="+b+'" target="_blank" class="new-block-template">'+wp.i18n.__("Please create a new ","alpha")+("product_layout"==b?wp.i18n.__("single product","alpha"):"shop_layout"==b?wp.i18n.__("shop layout","alpha"):b)+"</a>":_+='<a href="'+window.location.href.substr(0,window.location.href.indexOf("wp-admin")+8)+'/admin.php?page=alpha-setup-wizard&step=default_plugins" class="new-block-template">'+wp.i18n.__("Please activate ","alpha")+alpha_admin_vars.theme_display_name+" Core</a>",_+="</div>"}else if("number"==v.type){if(m){var k=m;void 0!==v.min&&(k=Math.max(v.min,k)),void 0!==v.max&&(k=Math.min(v.max,k)),m!=k&&a.setConditionOption(c,d,u,k)}_+='<input type="number" class="alpha-layout-part-control" name="'+f+'" id="'+f+'"'+(void 0===v.min?"":' min="'+v.min+'"')+(void 0===v.max?"":' max="'+v.max+'"')+' step="1" value="'+m+'">'}else if("select"==v.type){for(var g in _+='<select class="alpha-layout-part-select alpha-layout-part-control" id="'+f+'" name="'+f+'">',v.options)_+='<option value="'+g+'"'+(g==m?" selected":"")+">"+v.options[g]+"</option>";_+="</select>"}else if("text"==v.type)_+='<input type="text" name="'+f+'" class="alpha-layout-part-input alpha-layout-part-control" id="'+f+'" value="'+m+'"></input>';else if("toggle"==v.type)_+='<div class="alpha-radio-button-set">',_+='<input type="radio" name="'+f+'" id="'+f+'_" value=""'+(m?"":" checked")+">",_+='<label class="fa fa-redo" for="'+f+'_" title="'+alpha_layout_vars.text_default+'"></label>',_+='<input type="radio" name="'+f+'" id="'+f+'_no" value="no"'+("no"==m?" checked":"")+">",_+='<label class="fa fa-eye-slash" for="'+f+'_no"></label>',_+='<input type="radio" name="'+f+'" id="'+f+'_yes" value="yes"'+("yes"==m?" checked":"")+">",_+='<label class="fa fa-check"for="'+f+'_yes"></label>',_+="</div>";else if("multicheck"==v.type){if(_+="<ul>",v.options)for(var g in v.options)_+='<li><label><input type="checkbox" name="'+f+'[]" value="'+g+'">'+v.options[g]+"</label></li>";_+="</ul>"}l+='<div class="alpha-layout-control" data-option="'+u+'">'+_+"</div>"}}n.html(l),s.addClass("edit")}},editCondition:function(a){var e,o=t(a.currentTarget);(e=o.is(".alpha-condition-menu > a")?o.parent().data("item"):o.closest(".alpha-layout-item")).hasClass("edit-condition")?setTimeout((function(){e.find(".alpha-scheme-list").each((function(){var a=t(this);a.data("select2")&&(a.hasClass("ajaxselect2")||a.select2("destroy"))}))}),300):e.find(".alpha-scheme-list:not(.select2-hidden-accessible)").each((function(){var a=t(this);if(a.hasClass("ajaxselect2")){var e=a.data("load-option"),o=a.data("values"),i=alpha_layout_vars.site_url+"/wp-json/ajaxselect2/v1/"+e+"/";a.select2({placeholder:a.attr("data-placeholder"),ajax:{url:i,dataType:"json",data:function(t){return{s:t.term}}},cache:!0}),t.ajax({url:i,dataType:"json",data:{ids:o||""}}).then((function(t){null!==t&&t.results.length>0&&(jQuery.each(t.results,(function(t,e){var o=new Option(e.text,e.id,!0,!0);a.append(o)})),a.trigger({type:"select2:select",params:{data:t}}))}))}else a.select2({placeholder:a.attr("data-placeholder")})})),e.toggleClass("edit-condition")},clickOther:function(a){var e=t(a.target);e.closest(".select2-container").length||e.closest(".alpha-layout-item").length||e.closest(".alpha-condition-set").length||!e.is("body *")||(t(".alpha-layout-item.edit").removeClass("edit"),t(".alpha-layout-item.edit-condition").removeClass("edit-condition"),setTimeout((function(){t(".alpha-layout-item .alpha-scheme-list").each((function(){var a=t(this);a.data("select2")&&(a.hasClass("ajaxselect2")||a.select2("destroy"))}))}),300)),this.closeContextMenu()},goBackFromEdit:function(a){var e=t(a.currentTarget).parent(".alpha-scheme-options");e.length?(e.hide(),setTimeout((function(){e.show()}),100)):t(a.currentTarget).closest(".alpha-layout-item").removeClass("edit edit-condition")},changeBlockMode:function(e){var o=e.currentTarget,i=t(o),n=i.closest(".alpha-layout-item");i.closest(".alpha-block-select").toggleClass("inactive-my","my"!=o.value),o.name.startsWith("_alpha_")&&a.setConditionOption(n.data("category"),n.data("condition-no"),i.closest(".alpha-layout-control").data("option"),o.value),this.refreshLayoutStatus(n)},changeOptionInput:function(e){var o=t(e.currentTarget),i=o.val(),n=o.closest(".alpha-block-select"),l=e.currentTarget.name;if(n.length&&"my"==e.currentTarget.value&&(i=n.find("select").val()),l.startsWith("_alpha_"))if(a.setConditionOption(o.closest(".alpha-layout-item").data("category"),o.closest(".alpha-layout-item").data("condition-no"),o.closest(".alpha-layout-control").data("option"),i),l.indexOf("single_product_type")>=0)(s=o.closest(".alpha-layout-options").find('.alpha-layout-control[data-option="single_product_block"]')).length&&s.toggle("builder"==i);else if(l.indexOf("shop_layout_type")>=0){var s=o.closest(".alpha-layout-options").find('.alpha-layout-control[data-option="shop_block"]'),c=o.closest(".alpha-layout-options").find('.alpha-layout-control[data-option="products_column"], .alpha-layout-control[data-option="loadmore_type"]');s.length&&s.toggle("builder"==i),c.length&&c.toggle("builder"!=i)}this.refreshLayoutStatus(t(e.currentTarget).closest(".alpha-layout-item"))}},o={init:function(){if(t("#alpha_layout_content").length&&"undefined"!=typeof alpha_layout_vars&&(this.model.init(),this.view.init(),this.filter(),alpha_layout_vars.default_cat)){var a="";"single"!=alpha_layout_vars.default_cat&&"archive"!=alpha_layout_vars.default_cat||!alpha_layout_vars.preview_post_type||(a="_"+alpha_layout_vars.preview_post_type);var e=t('.alpha-layout-builder-categories [data-category="'+alpha_layout_vars.default_cat+a+'"]');e.trigger("click"),-1!==location.search.indexOf("is_elementor_preview")&&e.siblings(":not(button)").hide()}},filter:function(){var a,e=window.location.search.substring(1).split("&"),o={};e.forEach((function(t){let a=t.split("=");o[a[0]]=a[1]})),o.category&&(t(".alpha-layout-item").css("top","-9999px").each((function(){var e=t(this);o.category==e.data("category")&&o.index==e.data("condition-no")&&(e.css({left:"0",top:"0"}),a=e)})),a.find('[data-part="'+o.slug+'"]').trigger("click"))},showHeaderSaveBtn:function(){var a=t(".alpha-admin-header"),e=t("#alpha_layout_builder .alpha-layouts-save.require-save");e.length&&t(window).scrollTop()+a.outerHeight()>=e.offset().top+e.outerHeight()?a.addClass("show-btn"):a.removeClass("show-btn")},view:e,model:a};themeAdmin.LayoutBuilder=o,t(document).ready((function(){o.init(),-1!=location.href.indexOf("noheader")&&t(document.body).addClass("alpha-admin-page").parent().addClass("alpha-studio-popup")}))}(jQuery);